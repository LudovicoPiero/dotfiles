# These settings were set by the catalyst build script that automatically
# built this stage.
# Please consult /usr/share/portage/config/make.conf.example for a more
# detailed example.

COMMON_FLAGS="-march=native -O2 -pipe"
CFLAGS="${COMMON_FLAGS}"
CXXFLAGS="${COMMON_FLAGS}"
FCFLAGS="${COMMON_FLAGS}"
FFLAGS="${COMMON_FLAGS}"
CPU_FLAGS_X86="aes avx avx2 bmi1 bmi2 f16c fma3 mmx mmxext pclmul popcnt rdrand sha sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3"

RUSTFLAGS="${RUSTFLAGS} -C target-cpu=native"
MAKEOPTS="-j4"

# This sets the language of build output to English.
# Please keep this setting intact when reporting bugs.
LC_MESSAGES=C.UTF-8

VIDEO_CARDS="amdgpu radeonsi"
ACCEPT_LICENSE="*"

# Core System: OpenRC + Elogind (Mandatory for non-systemd setups)
USE="-systemd -kde -gnome mount dist-kernel elogind dbus udev policykit"
# Graphics Stack: Hybrid Wayland + XWayland
USE="${USE} wayland X vulkan opengl"
# Audio & Media
USE="${USE} fonts bluetooth pipewire pulseaudio screencast ffmpeg"
# Bloat
USE="${USE} -cups -gps -geo -telemetry -accessibility -zeroconf -avahi -joystick -wacom -smartcard -ipod -ios -nvenc -3dfx -voodoo -altivec -neon -debug -test -aqua"

# Localization
L10N="id ja ko en zh-CN zh-TW"

GRUB_PLATFORMS="efi-64"
# GENTOO_MIRRORS="http://tux.rainside.sk/gentoo/ https://gentoo.osuosl.org/"
GENTOO_MIRRORS="https://download.nus.edu.sg/mirror/gentoo/ https://gentoo.osuosl.org/ http://ftp.jaist.ac.jp/pub/Linux/Gentoo/ https://mirrors.kernel.org/gentoo/"

# Gentoo Binary
EMERGE_DEFAULT_OPTS="${EMERGE_DEFAULT_OPTS} --getbinpkg"
FEATURES="${FEATURES} parallel-fetch getbinpkg binpkg-request-signature"

# Aria2 downloader command
# FETCHCOMMAND="/usr/bin/aria2c -d \${DISTDIR} -o \${FILE} --allow-overwrite=true --max-connection-per-server=5 --min-split-size=5M --no-netrc=true --remote-time=true --cons-mode=always --metalink-enable=false --ftp-pasv=true --lowest-speed-limit=20K \${URI}"
# RESUMECOMMAND="${FETCHCOMMAND} -c"
